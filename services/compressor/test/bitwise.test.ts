import { describe, it } from 'node:test';
import * as assert from 'node:assert/strict';
import * as path from 'node:path';
import {readFile} from "node:fs/promises";
import {fileURLToPath} from "node:url";

import {packBits, packNibbles} from "../src/utils/bitwise";

describe('packBits', () => {
	const fixtures = [
		[[0, 0, 0, 0, 0, 0, 0, 0], 0],
		[[0, 0, 0, 0, 0, 0, 0, 1], 1],
		[[0, 0, 0, 0, 0, 0, 1, 0], 2],
		[[0, 0, 0, 0, 0, 0, 1, 1], 3],
		[[0, 0, 0, 0, 0, 1, 0, 0], 4],
		[[0, 0, 0, 0, 0, 1, 0, 1], 5],
		[[0, 0, 0, 0, 0, 1, 1, 0], 6],
		[[0, 0, 0, 0, 0, 1, 1, 1], 7],
		[[0, 0, 0, 0, 1, 0, 0, 0], 8],
		[[0, 0, 0, 0, 1, 0, 0, 1], 9],
		[[0, 0, 0, 0, 1, 0, 1, 0], 10],
		[[0, 0, 0, 0, 1, 0, 1, 1], 11],
		[[0, 0, 0, 0, 1, 1, 0, 0], 12],
		[[0, 0, 0, 0, 1, 1, 0, 1], 13],
		[[0, 0, 0, 0, 1, 1, 1, 0], 14],
		[[0, 0, 0, 0, 1, 1, 1, 1], 15],
		[[0, 0, 0, 1, 0, 0, 0, 0], 16],
		[[0, 0, 0, 1, 0, 0, 0, 1], 17],
		[[0, 0, 0, 1, 0, 0, 1, 0], 18],
		[[0, 0, 0, 1, 0, 0, 1, 1], 19],
		[[0, 0, 0, 1, 0, 1, 0, 0], 20],
		[[0, 0, 0, 1, 0, 1, 0, 1], 21],
		[[0, 0, 0, 1, 0, 1, 1, 0], 22],
		[[0, 0, 0, 1, 0, 1, 1, 1], 23],
		[[0, 0, 0, 1, 1, 0, 0, 0], 24],
		[[0, 0, 0, 1, 1, 0, 0, 1], 25],
		[[0, 0, 0, 1, 1, 0, 1, 0], 26],
		[[0, 0, 0, 1, 1, 0, 1, 1], 27],
		[[0, 0, 0, 1, 1, 1, 0, 0], 28],
		[[0, 0, 0, 1, 1, 1, 0, 1], 29],
		[[0, 0, 0, 1, 1, 1, 1, 0], 30],
		[[0, 0, 0, 1, 1, 1, 1, 1], 31],
		[[0, 0, 1, 0, 0, 0, 0, 0], 32],
		[[0, 0, 1, 0, 0, 0, 0, 1], 33],
		[[0, 0, 1, 0, 0, 0, 1, 0], 34],
		[[0, 0, 1, 0, 0, 0, 1, 1], 35],
		[[0, 0, 1, 0, 0, 1, 0, 0], 36],
		[[0, 0, 1, 0, 0, 1, 0, 1], 37],
		[[0, 0, 1, 0, 0, 1, 1, 0], 38],
		[[0, 0, 1, 0, 0, 1, 1, 1], 39],
		[[0, 0, 1, 0, 1, 0, 0, 0], 40],
		[[0, 0, 1, 0, 1, 0, 0, 1], 41],
		[[0, 0, 1, 0, 1, 0, 1, 0], 42],
		[[0, 0, 1, 0, 1, 0, 1, 1], 43],
		[[0, 0, 1, 0, 1, 1, 0, 0], 44],
		[[0, 0, 1, 0, 1, 1, 0, 1], 45],
		[[0, 0, 1, 0, 1, 1, 1, 0], 46],
		[[0, 0, 1, 0, 1, 1, 1, 1], 47],
		[[0, 0, 1, 1, 0, 0, 0, 0], 48],
		[[0, 0, 1, 1, 0, 0, 0, 1], 49],
		[[0, 0, 1, 1, 0, 0, 1, 0], 50],
		[[0, 0, 1, 1, 0, 0, 1, 1], 51],
		[[0, 0, 1, 1, 0, 1, 0, 0], 52],
		[[0, 0, 1, 1, 0, 1, 0, 1], 53],
		[[0, 0, 1, 1, 0, 1, 1, 0], 54],
		[[0, 0, 1, 1, 0, 1, 1, 1], 55],
		[[0, 0, 1, 1, 1, 0, 0, 0], 56],
		[[0, 0, 1, 1, 1, 0, 0, 1], 57],
		[[0, 0, 1, 1, 1, 0, 1, 0], 58],
		[[0, 0, 1, 1, 1, 0, 1, 1], 59],
		[[0, 0, 1, 1, 1, 1, 0, 0], 60],
		[[0, 0, 1, 1, 1, 1, 0, 1], 61],
		[[0, 0, 1, 1, 1, 1, 1, 0], 62],
		[[0, 0, 1, 1, 1, 1, 1, 1], 63],
		[[0, 1, 0, 0, 0, 0, 0, 0], 64],
		[[0, 1, 0, 0, 0, 0, 0, 1], 65],
		[[0, 1, 0, 0, 0, 0, 1, 0], 66],
		[[0, 1, 0, 0, 0, 0, 1, 1], 67],
		[[0, 1, 0, 0, 0, 1, 0, 0], 68],
		[[0, 1, 0, 0, 0, 1, 0, 1], 69],
		[[0, 1, 0, 0, 0, 1, 1, 0], 70],
		[[0, 1, 0, 0, 0, 1, 1, 1], 71],
		[[0, 1, 0, 0, 1, 0, 0, 0], 72],
		[[0, 1, 0, 0, 1, 0, 0, 1], 73],
		[[0, 1, 0, 0, 1, 0, 1, 0], 74],
		[[0, 1, 0, 0, 1, 0, 1, 1], 75],
		[[0, 1, 0, 0, 1, 1, 0, 0], 76],
		[[0, 1, 0, 0, 1, 1, 0, 1], 77],
		[[0, 1, 0, 0, 1, 1, 1, 0], 78],
		[[0, 1, 0, 0, 1, 1, 1, 1], 79],
		[[0, 1, 0, 1, 0, 0, 0, 0], 80],
		[[0, 1, 0, 1, 0, 0, 0, 1], 81],
		[[0, 1, 0, 1, 0, 0, 1, 0], 82],
		[[0, 1, 0, 1, 0, 0, 1, 1], 83],
		[[0, 1, 0, 1, 0, 1, 0, 0], 84],
		[[0, 1, 0, 1, 0, 1, 0, 1], 85],
		[[0, 1, 0, 1, 0, 1, 1, 0], 86],
		[[0, 1, 0, 1, 0, 1, 1, 1], 87],
		[[0, 1, 0, 1, 1, 0, 0, 0], 88],
		[[0, 1, 0, 1, 1, 0, 0, 1], 89],
		[[0, 1, 0, 1, 1, 0, 1, 0], 90],
		[[0, 1, 0, 1, 1, 0, 1, 1], 91],
		[[0, 1, 0, 1, 1, 1, 0, 0], 92],
		[[0, 1, 0, 1, 1, 1, 0, 1], 93],
		[[0, 1, 0, 1, 1, 1, 1, 0], 94],
		[[0, 1, 0, 1, 1, 1, 1, 1], 95],
		[[0, 1, 1, 0, 0, 0, 0, 0], 96],
		[[0, 1, 1, 0, 0, 0, 0, 1], 97],
		[[0, 1, 1, 0, 0, 0, 1, 0], 98],
		[[0, 1, 1, 0, 0, 0, 1, 1], 99],
		[[0, 1, 1, 0, 0, 1, 0, 0], 100],
		[[0, 1, 1, 0, 0, 1, 0, 1], 101],
		[[0, 1, 1, 0, 0, 1, 1, 0], 102],
		[[0, 1, 1, 0, 0, 1, 1, 1], 103],
		[[0, 1, 1, 0, 1, 0, 0, 0], 104],
		[[0, 1, 1, 0, 1, 0, 0, 1], 105],
		[[0, 1, 1, 0, 1, 0, 1, 0], 106],
		[[0, 1, 1, 0, 1, 0, 1, 1], 107],
		[[0, 1, 1, 0, 1, 1, 0, 0], 108],
		[[0, 1, 1, 0, 1, 1, 0, 1], 109],
		[[0, 1, 1, 0, 1, 1, 1, 0], 110],
		[[0, 1, 1, 0, 1, 1, 1, 1], 111],
		[[0, 1, 1, 1, 0, 0, 0, 0], 112],
		[[0, 1, 1, 1, 0, 0, 0, 1], 113],
		[[0, 1, 1, 1, 0, 0, 1, 0], 114],
		[[0, 1, 1, 1, 0, 0, 1, 1], 115],
		[[0, 1, 1, 1, 0, 1, 0, 0], 116],
		[[0, 1, 1, 1, 0, 1, 0, 1], 117],
		[[0, 1, 1, 1, 0, 1, 1, 0], 118],
		[[0, 1, 1, 1, 0, 1, 1, 1], 119],
		[[0, 1, 1, 1, 1, 0, 0, 0], 120],
		[[0, 1, 1, 1, 1, 0, 0, 1], 121],
		[[0, 1, 1, 1, 1, 0, 1, 0], 122],
		[[0, 1, 1, 1, 1, 0, 1, 1], 123],
		[[0, 1, 1, 1, 1, 1, 0, 0], 124],
		[[0, 1, 1, 1, 1, 1, 0, 1], 125],
		[[0, 1, 1, 1, 1, 1, 1, 0], 126],
		[[0, 1, 1, 1, 1, 1, 1, 1], 127],
		[[1, 0, 0, 0, 0, 0, 0, 0], 128],
		[[1, 0, 0, 0, 0, 0, 0, 1], 129],
		[[1, 0, 0, 0, 0, 0, 1, 0], 130],
		[[1, 0, 0, 0, 0, 0, 1, 1], 131],
		[[1, 0, 0, 0, 0, 1, 0, 0], 132],
		[[1, 0, 0, 0, 0, 1, 0, 1], 133],
		[[1, 0, 0, 0, 0, 1, 1, 0], 134],
		[[1, 0, 0, 0, 0, 1, 1, 1], 135],
		[[1, 0, 0, 0, 1, 0, 0, 0], 136],
		[[1, 0, 0, 0, 1, 0, 0, 1], 137],
		[[1, 0, 0, 0, 1, 0, 1, 0], 138],
		[[1, 0, 0, 0, 1, 0, 1, 1], 139],
		[[1, 0, 0, 0, 1, 1, 0, 0], 140],
		[[1, 0, 0, 0, 1, 1, 0, 1], 141],
		[[1, 0, 0, 0, 1, 1, 1, 0], 142],
		[[1, 0, 0, 0, 1, 1, 1, 1], 143],
		[[1, 0, 0, 1, 0, 0, 0, 0], 144],
		[[1, 0, 0, 1, 0, 0, 0, 1], 145],
		[[1, 0, 0, 1, 0, 0, 1, 0], 146],
		[[1, 0, 0, 1, 0, 0, 1, 1], 147],
		[[1, 0, 0, 1, 0, 1, 0, 0], 148],
		[[1, 0, 0, 1, 0, 1, 0, 1], 149],
		[[1, 0, 0, 1, 0, 1, 1, 0], 150],
		[[1, 0, 0, 1, 0, 1, 1, 1], 151],
		[[1, 0, 0, 1, 1, 0, 0, 0], 152],
		[[1, 0, 0, 1, 1, 0, 0, 1], 153],
		[[1, 0, 0, 1, 1, 0, 1, 0], 154],
		[[1, 0, 0, 1, 1, 0, 1, 1], 155],
		[[1, 0, 0, 1, 1, 1, 0, 0], 156],
		[[1, 0, 0, 1, 1, 1, 0, 1], 157],
		[[1, 0, 0, 1, 1, 1, 1, 0], 158],
		[[1, 0, 0, 1, 1, 1, 1, 1], 159],
		[[1, 0, 1, 0, 0, 0, 0, 0], 160],
		[[1, 0, 1, 0, 0, 0, 0, 1], 161],
		[[1, 0, 1, 0, 0, 0, 1, 0], 162],
		[[1, 0, 1, 0, 0, 0, 1, 1], 163],
		[[1, 0, 1, 0, 0, 1, 0, 0], 164],
		[[1, 0, 1, 0, 0, 1, 0, 1], 165],
		[[1, 0, 1, 0, 0, 1, 1, 0], 166],
		[[1, 0, 1, 0, 0, 1, 1, 1], 167],
		[[1, 0, 1, 0, 1, 0, 0, 0], 168],
		[[1, 0, 1, 0, 1, 0, 0, 1], 169],
		[[1, 0, 1, 0, 1, 0, 1, 0], 170],
		[[1, 0, 1, 0, 1, 0, 1, 1], 171],
		[[1, 0, 1, 0, 1, 1, 0, 0], 172],
		[[1, 0, 1, 0, 1, 1, 0, 1], 173],
		[[1, 0, 1, 0, 1, 1, 1, 0], 174],
		[[1, 0, 1, 0, 1, 1, 1, 1], 175],
		[[1, 0, 1, 1, 0, 0, 0, 0], 176],
		[[1, 0, 1, 1, 0, 0, 0, 1], 177],
		[[1, 0, 1, 1, 0, 0, 1, 0], 178],
		[[1, 0, 1, 1, 0, 0, 1, 1], 179],
		[[1, 0, 1, 1, 0, 1, 0, 0], 180],
		[[1, 0, 1, 1, 0, 1, 0, 1], 181],
		[[1, 0, 1, 1, 0, 1, 1, 0], 182],
		[[1, 0, 1, 1, 0, 1, 1, 1], 183],
		[[1, 0, 1, 1, 1, 0, 0, 0], 184],
		[[1, 0, 1, 1, 1, 0, 0, 1], 185],
		[[1, 0, 1, 1, 1, 0, 1, 0], 186],
		[[1, 0, 1, 1, 1, 0, 1, 1], 187],
		[[1, 0, 1, 1, 1, 1, 0, 0], 188],
		[[1, 0, 1, 1, 1, 1, 0, 1], 189],
		[[1, 0, 1, 1, 1, 1, 1, 0], 190],
		[[1, 0, 1, 1, 1, 1, 1, 1], 191],
		[[1, 1, 0, 0, 0, 0, 0, 0], 192],
		[[1, 1, 0, 0, 0, 0, 0, 1], 193],
		[[1, 1, 0, 0, 0, 0, 1, 0], 194],
		[[1, 1, 0, 0, 0, 0, 1, 1], 195],
		[[1, 1, 0, 0, 0, 1, 0, 0], 196],
		[[1, 1, 0, 0, 0, 1, 0, 1], 197],
		[[1, 1, 0, 0, 0, 1, 1, 0], 198],
		[[1, 1, 0, 0, 0, 1, 1, 1], 199],
		[[1, 1, 0, 0, 1, 0, 0, 0], 200],
		[[1, 1, 0, 0, 1, 0, 0, 1], 201],
		[[1, 1, 0, 0, 1, 0, 1, 0], 202],
		[[1, 1, 0, 0, 1, 0, 1, 1], 203],
		[[1, 1, 0, 0, 1, 1, 0, 0], 204],
		[[1, 1, 0, 0, 1, 1, 0, 1], 205],
		[[1, 1, 0, 0, 1, 1, 1, 0], 206],
		[[1, 1, 0, 0, 1, 1, 1, 1], 207],
		[[1, 1, 0, 1, 0, 0, 0, 0], 208],
		[[1, 1, 0, 1, 0, 0, 0, 1], 209],
		[[1, 1, 0, 1, 0, 0, 1, 0], 210],
		[[1, 1, 0, 1, 0, 0, 1, 1], 211],
		[[1, 1, 0, 1, 0, 1, 0, 0], 212],
		[[1, 1, 0, 1, 0, 1, 0, 1], 213],
		[[1, 1, 0, 1, 0, 1, 1, 0], 214],
		[[1, 1, 0, 1, 0, 1, 1, 1], 215],
		[[1, 1, 0, 1, 1, 0, 0, 0], 216],
		[[1, 1, 0, 1, 1, 0, 0, 1], 217],
		[[1, 1, 0, 1, 1, 0, 1, 0], 218],
		[[1, 1, 0, 1, 1, 0, 1, 1], 219],
		[[1, 1, 0, 1, 1, 1, 0, 0], 220],
		[[1, 1, 0, 1, 1, 1, 0, 1], 221],
		[[1, 1, 0, 1, 1, 1, 1, 0], 222],
		[[1, 1, 0, 1, 1, 1, 1, 1], 223],
		[[1, 1, 1, 0, 0, 0, 0, 0], 224],
		[[1, 1, 1, 0, 0, 0, 0, 1], 225],
		[[1, 1, 1, 0, 0, 0, 1, 0], 226],
		[[1, 1, 1, 0, 0, 0, 1, 1], 227],
		[[1, 1, 1, 0, 0, 1, 0, 0], 228],
		[[1, 1, 1, 0, 0, 1, 0, 1], 229],
		[[1, 1, 1, 0, 0, 1, 1, 0], 230],
		[[1, 1, 1, 0, 0, 1, 1, 1], 231],
		[[1, 1, 1, 0, 1, 0, 0, 0], 232],
		[[1, 1, 1, 0, 1, 0, 0, 1], 233],
		[[1, 1, 1, 0, 1, 0, 1, 0], 234],
		[[1, 1, 1, 0, 1, 0, 1, 1], 235],
		[[1, 1, 1, 0, 1, 1, 0, 0], 236],
		[[1, 1, 1, 0, 1, 1, 0, 1], 237],
		[[1, 1, 1, 0, 1, 1, 1, 0], 238],
		[[1, 1, 1, 0, 1, 1, 1, 1], 239],
		[[1, 1, 1, 1, 0, 0, 0, 0], 240],
		[[1, 1, 1, 1, 0, 0, 0, 1], 241],
		[[1, 1, 1, 1, 0, 0, 1, 0], 242],
		[[1, 1, 1, 1, 0, 0, 1, 1], 243],
		[[1, 1, 1, 1, 0, 1, 0, 0], 244],
		[[1, 1, 1, 1, 0, 1, 0, 1], 245],
		[[1, 1, 1, 1, 0, 1, 1, 0], 246],
		[[1, 1, 1, 1, 0, 1, 1, 1], 247],
		[[1, 1, 1, 1, 1, 0, 0, 0], 248],
		[[1, 1, 1, 1, 1, 0, 0, 1], 249],
		[[1, 1, 1, 1, 1, 0, 1, 0], 250],
		[[1, 1, 1, 1, 1, 0, 1, 1], 251],
		[[1, 1, 1, 1, 1, 1, 0, 0], 252],
		[[1, 1, 1, 1, 1, 1, 0, 1], 253],
		[[1, 1, 1, 1, 1, 1, 1, 0], 254],
		[[1, 1, 1, 1, 1, 1, 1, 1], 255],
	] satisfies [number[], number][];

	it('packs all possible bits in a byte', () => {
		for (const [bits, expected] of fixtures) {
			assert.equal(packBits(bits), expected);
		}
	});
});

describe('packNibbles', () => {
	const fixtures = [
		[[0, 0], 0],
		[[0, 1], 1],
		[[0, 2], 2],
		[[0, 3], 3],
		[[0, 4], 4],
		[[0, 5], 5],
		[[0, 6], 6],
		[[0, 7], 7],
		[[0, 8], 8],
		[[0, 9], 9],
		[[0, 10], 10],
		[[0, 11], 11],
		[[0, 12], 12],
		[[0, 13], 13],
		[[0, 14], 14],
		[[0, 15], 15],
		[[1, 0], 16],
		[[1, 1], 17],
		[[1, 2], 18],
		[[1, 3], 19],
		[[1, 4], 20],
		[[1, 5], 21],
		[[1, 6], 22],
		[[1, 7], 23],
		[[1, 8], 24],
		[[1, 9], 25],
		[[1, 10], 26],
		[[1, 11], 27],
		[[1, 12], 28],
		[[1, 13], 29],
		[[1, 14], 30],
		[[1, 15], 31],
		[[2, 0], 32],
		[[2, 1], 33],
		[[2, 2], 34],
		[[2, 3], 35],
		[[2, 4], 36],
		[[2, 5], 37],
		[[2, 6], 38],
		[[2, 7], 39],
		[[2, 8], 40],
		[[2, 9], 41],
		[[2, 10], 42],
		[[2, 11], 43],
		[[2, 12], 44],
		[[2, 13], 45],
		[[2, 14], 46],
		[[2, 15], 47],
		[[3, 0], 48],
		[[3, 1], 49],
		[[3, 2], 50],
		[[3, 3], 51],
		[[3, 4], 52],
		[[3, 5], 53],
		[[3, 6], 54],
		[[3, 7], 55],
		[[3, 8], 56],
		[[3, 9], 57],
		[[3, 10], 58],
		[[3, 11], 59],
		[[3, 12], 60],
		[[3, 13], 61],
		[[3, 14], 62],
		[[3, 15], 63],
		[[4, 0], 64],
		[[4, 1], 65],
		[[4, 2], 66],
		[[4, 3], 67],
		[[4, 4], 68],
		[[4, 5], 69],
		[[4, 6], 70],
		[[4, 7], 71],
		[[4, 8], 72],
		[[4, 9], 73],
		[[4, 10], 74],
		[[4, 11], 75],
		[[4, 12], 76],
		[[4, 13], 77],
		[[4, 14], 78],
		[[4, 15], 79],
		[[5, 0], 80],
		[[5, 1], 81],
		[[5, 2], 82],
		[[5, 3], 83],
		[[5, 4], 84],
		[[5, 5], 85],
		[[5, 6], 86],
		[[5, 7], 87],
		[[5, 8], 88],
		[[5, 9], 89],
		[[5, 10], 90],
		[[5, 11], 91],
		[[5, 12], 92],
		[[5, 13], 93],
		[[5, 14], 94],
		[[5, 15], 95],
		[[6, 0], 96],
		[[6, 1], 97],
		[[6, 2], 98],
		[[6, 3], 99],
		[[6, 4], 100],
		[[6, 5], 101],
		[[6, 6], 102],
		[[6, 7], 103],
		[[6, 8], 104],
		[[6, 9], 105],
		[[6, 10], 106],
		[[6, 11], 107],
		[[6, 12], 108],
		[[6, 13], 109],
		[[6, 14], 110],
		[[6, 15], 111],
		[[7, 0], 112],
		[[7, 1], 113],
		[[7, 2], 114],
		[[7, 3], 115],
		[[7, 4], 116],
		[[7, 5], 117],
		[[7, 6], 118],
		[[7, 7], 119],
		[[7, 8], 120],
		[[7, 9], 121],
		[[7, 10], 122],
		[[7, 11], 123],
		[[7, 12], 124],
		[[7, 13], 125],
		[[7, 14], 126],
		[[7, 15], 127],
		[[8, 0], 128],
		[[8, 1], 129],
		[[8, 2], 130],
		[[8, 3], 131],
		[[8, 4], 132],
		[[8, 5], 133],
		[[8, 6], 134],
		[[8, 7], 135],
		[[8, 8], 136],
		[[8, 9], 137],
		[[8, 10], 138],
		[[8, 11], 139],
		[[8, 12], 140],
		[[8, 13], 141],
		[[8, 14], 142],
		[[8, 15], 143],
		[[9, 0], 144],
		[[9, 1], 145],
		[[9, 2], 146],
		[[9, 3], 147],
		[[9, 4], 148],
		[[9, 5], 149],
		[[9, 6], 150],
		[[9, 7], 151],
		[[9, 8], 152],
		[[9, 9], 153],
		[[9, 10], 154],
		[[9, 11], 155],
		[[9, 12], 156],
		[[9, 13], 157],
		[[9, 14], 158],
		[[9, 15], 159],
		[[10, 0], 160],
		[[10, 1], 161],
		[[10, 2], 162],
		[[10, 3], 163],
		[[10, 4], 164],
		[[10, 5], 165],
		[[10, 6], 166],
		[[10, 7], 167],
		[[10, 8], 168],
		[[10, 9], 169],
		[[10, 10], 170],
		[[10, 11], 171],
		[[10, 12], 172],
		[[10, 13], 173],
		[[10, 14], 174],
		[[10, 15], 175],
		[[11, 0], 176],
		[[11, 1], 177],
		[[11, 2], 178],
		[[11, 3], 179],
		[[11, 4], 180],
		[[11, 5], 181],
		[[11, 6], 182],
		[[11, 7], 183],
		[[11, 8], 184],
		[[11, 9], 185],
		[[11, 10], 186],
		[[11, 11], 187],
		[[11, 12], 188],
		[[11, 13], 189],
		[[11, 14], 190],
		[[11, 15], 191],
		[[12, 0], 192],
		[[12, 1], 193],
		[[12, 2], 194],
		[[12, 3], 195],
		[[12, 4], 196],
		[[12, 5], 197],
		[[12, 6], 198],
		[[12, 7], 199],
		[[12, 8], 200],
		[[12, 9], 201],
		[[12, 10], 202],
		[[12, 11], 203],
		[[12, 12], 204],
		[[12, 13], 205],
		[[12, 14], 206],
		[[12, 15], 207],
		[[13, 0], 208],
		[[13, 1], 209],
		[[13, 2], 210],
		[[13, 3], 211],
		[[13, 4], 212],
		[[13, 5], 213],
		[[13, 6], 214],
		[[13, 7], 215],
		[[13, 8], 216],
		[[13, 9], 217],
		[[13, 10], 218],
		[[13, 11], 219],
		[[13, 12], 220],
		[[13, 13], 221],
		[[13, 14], 222],
		[[13, 15], 223],
		[[14, 0], 224],
		[[14, 1], 225],
		[[14, 2], 226],
		[[14, 3], 227],
		[[14, 4], 228],
		[[14, 5], 229],
		[[14, 6], 230],
		[[14, 7], 231],
		[[14, 8], 232],
		[[14, 9], 233],
		[[14, 10], 234],
		[[14, 11], 235],
		[[14, 12], 236],
		[[14, 13], 237],
		[[14, 14], 238],
		[[14, 15], 239],
		[[15, 0], 240],
		[[15, 1], 241],
		[[15, 2], 242],
		[[15, 3], 243],
		[[15, 4], 244],
		[[15, 5], 245],
		[[15, 6], 246],
		[[15, 7], 247],
		[[15, 8], 248],
		[[15, 9], 249],
		[[15, 10], 250],
		[[15, 11], 251],
		[[15, 12], 252],
		[[15, 13], 253],
		[[15, 14], 254],
		[[15, 15], 255],
	] satisfies [number[], number][];

	it('packs all possible nibbles in a byte', () => {
		for (const [nibbles, expected] of fixtures) {
			assert.equal(packNibbles(nibbles), expected);
		}
	});
});
