<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <title>VŠB-EInk Počasí</title>
    <style>
        html, body {
            margin: 0;
            padding: 0;
        }

        .clear {
            clear: both;
        }
    </style>
</head>
<body>
    <header style="background: black;">
        <div style="float: left; color: white; font-size: xx-large; margin: 1rem">
            <span id="date-text"></span>
        </div>
        <br class="clear" />
    </header>

    <div style="width: 100%; height: 1rem"></div>

    <div id="ww_f7fe6dec810b5" v='1.3' loc='id' a='{"t":"responsive","lang":"cs","sl_lpl":1,"ids":["wl4415"],"font":"Arial","sl_ics":"one","sl_sot":"celsius","cl_bkg":"#FFFFFF00","cl_font":"#000000","cl_cloud":"#d4d4d4","cl_persp":"#2196F3","cl_sun":"#FFC107","cl_moon":"#FFC107","cl_thund":"#FF5722","cl_odd":"#00000000"}'>More forecasts: <a href="https://sharpweather.com/cs/prague/" id="ww_f7fe6dec810b5_u" target="_blank">Počasí Praha</a></div><script async src="https://app2.weatherwidget.org/js/?id=ww_f7fe6dec810b5"></script>

    <div id="rss-widget" style="margin-left: 1rem">
        <h2>Novinky</h2>
    </div>

    <script type="module">
        // datum
        document.getElementById('date-text').innerText = new Date().toLocaleString('cs-CZ');

        // RSS
        const rss = await fetch('http://vsb-eink-renderer/rss').then(r => r.json());
        const rssWidget = document.getElementById('rss-widget');
        for (const item of rss.items.slice(0, 3)) {
            const pubDate = new Date(item.published).toLocaleDateString();
            const title = item.title;
            const description = item.description;
            rssWidget.innerHTML += `<div style="margin: 1rem 0"><span style="font-weight: bold">${title}</span><br/><span style="font-size: smaller">${pubDate}</span><br/><span>${description}</span></div>`;
        }
    </script>
</body>
</html>